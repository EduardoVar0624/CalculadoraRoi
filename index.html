<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de ROI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-800 to-slate-900 min-h-screen flex items-center justify-center px-4">
  <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-xl w-full">
    <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">ğŸ§® Calculadora de ROI</h1>

    <div class="space-y-4">
      <div>
        <label class="font-semibold">TamaÃ±o de flota:</label>
        <input type="number" id="unidades" class="mt-1 w-full border rounded-lg p-2" placeholder="Ej. 120" />
      </div>

      <div>
        <label class="font-semibold block mb-2">MÃ³dulos activados:</label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" id="viajes" class="accent-indigo-600" />
          <span>ğŸš— Viajes</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" id="temperatura" class="accent-indigo-600" />
          <span>ğŸŒ¡ï¸ Temperatura</span>
        </label>
        <label class="flex items-center space-x-2">
          <input type="checkbox" id="combustible" class="accent-indigo-600" />
          <span>â›½ Combustible</span>
        </label>
      </div>

      <div>
        <label class="font-semibold">Costo actual mensual sin mÃ³dulos (MXN):</label>
        <input type="number" id="costoActual" class="mt-1 w-full border rounded-lg p-2" placeholder="Ej. 10000" />
      </div>

      <div>
        <label class="font-semibold">Ahorro estimado mensual con mÃ³dulos (MXN):</label>
        <input type="number" id="ahorroEstimado" class="mt-1 w-full border rounded-lg p-2" placeholder="Ej. 2000" />
      </div>

      <button onclick="calcularROI()" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-lg mt-4 hover:bg-indigo-700 transition">
        Calcular ROI ğŸš€
      </button>

      <div id="resultado" class="bg-indigo-50 border border-indigo-200 p-4 rounded-lg mt-4 text-indigo-900 font-semibold hidden"></div>
    </div>
  </div>

  <script>
    const preciosMXN = {
      viajes: [1.50, 1.25, 1.00, 0.75],
      temperatura: [2.00, 2.00, 1.50, 1.00],
      combustible: [2.00, 2.00, 1.50, 1.00]
    };

    function getTier(unidades) {
      if (unidades <= 50) return 0;
      if (unidades <= 150) return 1;
      if (unidades <= 250) return 2;
      return 3;
    }

    function calcularROI() {
      const unidades = parseInt(document.getElementById("unidades").value);
      const costoActual = parseFloat(document.getElementById("costoActual").value);
      const ahorroEstimado = parseFloat(document.getElementById("ahorroEstimado").value);
      const tier = getTier(unidades);

      const usaViajes = document.getElementById("viajes").checked;
      const usaTemperatura = document.getElementById("temperatura").checked;
      const usaCombustible = document.getElementById("combustible").checked;

      let costoModulos = 0;
      if (usaViajes) costoModulos += preciosMXN.viajes[tier] * unidades;
      if (usaTemperatura) costoModulos += preciosMXN.temperatura[tier] * unidades;
      if (usaCombustible) costoModulos += preciosMXN.combustible[tier] * unidades;

      const gananciaNeta = ahorroEstimado - costoModulos;
      const roi = (gananciaNeta / costoModulos) * 100;
      const mesesRecuperacion = costoModulos > 0 ? costoModulos / ahorroEstimado : 0;

      const resultadoDiv = document.getElementById("resultado");

      if (isNaN(unidades) || isNaN(costoActual) || isNaN(ahorroEstimado) || unidades <= 0 || ahorroEstimado <= 0) {
        resultadoDiv.innerHTML = "âš ï¸ Por favor, completa todos los campos correctamente.";
        resultadoDiv.classList.remove("hidden");
        return;
      }

      resultadoDiv.innerHTML = `
        <p>ğŸ“Š <strong>Costo mensual de los mÃ³dulos:</strong> $${costoModulos.toFixed(2)} MXN</p>
        <p>ğŸ“ˆ <strong>ROI mensual:</strong> ${roi.toFixed(2)}%</p>
        <p>â³ <strong>Tiempo estimado para recuperar la inversiÃ³n:</strong> ${mesesRecuperacion.toFixed(1)} meses</p>
      `;
      resultadoDiv.classList.remove("hidden");
    }
  </script>
</body>
</html>
